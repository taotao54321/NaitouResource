+++
title = "PRG-ROM マップ"
date = 2022-01-21
+++

## 概要

|アドレス|種別|内容|
|--|--|--|
|`$C000`|code|RESET/IRQ ルーチン|
|`$C0E1`|code|ゲームオーバーシーン|
|`$C161`|code|パレット初期化ルーチン|
|`$C17A`|code|NMI の特殊タスクの完了を待つルーチン|
|`$C17F`|data|初期パレットデータ|
|`$C19F`|code|BGデータをVRAMへ転送するルーチン (RLE 対応)|
|`$C1EB`|code|VRAMをゼロクリアするルーチン|
|`$C207`|code|NMI にスプライトDMAタスクを依頼し、完了を待つルーチン|
|`$C20E`|code|入力更新ルーチン|
|`$C239`|code|NMI ルーチン|
|`$C306`|code|持ち時間表示用バッファへ数字を 1 つ書き込むルーチン|
|`$C36B`|code|NMI タスク: パレット転送|
|`$C39A`|code|NMI タスク: スプライトDMA|
|`$C3A7`|code|NMI タスク: VRAMへのデータ転送 (Type A)|
|`$C3AD`|code|VRAMへのデータ転送ルーチン (Type A)|
|`$C3D4`|code|NMI タスク: VRAMへのデータ転送 (Type B)|
|`$C3FB`|code|NMI タスク: 右上メッセージ欄の点滅表示|
|`$C44C`|data|メッセージ欄 "指せない" BGデータ (Type A)|
|`$C45F`|data|メッセージ欄 消去用 BGデータ (Type A)|
|`$C478`|code|NMI タスク: 手数表示用バッファをVRAMへ転送|
|`$C4AB`|code|タイトルシーン|
|`$C5DB`|code|手合割表示用バッファ更新ルーチン|
|`$C605`|code|デモプレイ開始ルーチン|
|`$C61A`|data|手合割表示用 BGデータ placeholder (Type A)|
|`$C63F`|data|手合割表示用 BGデータ データ部|
|`$C66F`|data|タイトル画面 BGデータ (RLE)|
|`$C7F1`|data|タイトル画面 スプライトデータ|
|`$C821`|data|タイトル画面 BGデータ|
|`$C825`|code|対局画面初期化ルーチン|
|`$C85D`|data|対局画面 BGデータ (RLE)|
|`$CAC0`|code||
|`$CB4E`|code||
|`$CCAB`|code||
|`$CCE8`|code||
|`$CD26`|code||
|`$CDC0`|code||
|`$CDCE`|code||
|`$CE4A`|code|L キーが押された際の処理|
|`$CE76`|code|R キーが押された際の処理|
|`$CE94`|code|D キーが押された際の処理|
|`$CEB1`|code|U キーが押された際の処理|
|`$CECE`|code||
|`$CEE5`|code||
|`$CEFF`|code|駒を掴む際の処理|
|`$CF33`|code|カーソル座標 (x,y) をマスに変換するルーチン|
|`$CF3E`|code|プレイヤーが違法手を指そうとしたときの処理|
|`$CFD7`|code||
|`$D094`|code|手数描画ルーチン|
|`$D0CB`|code|手数表示用バッファへ数字を 1 つ書き込むルーチン|
|`$D0EB`|code|プレイヤー側の成/不成の選択処理|
|`$D161`|data|「成る」「成らず」BGデータ (Type A)|
|`$D186`|data|「成らず」消去用 BGデータ (Type A)|
|`$D19B`|code|「王手です」「詰みです」表示要求ルーチン|
|`$D1D2`|data|「王手です」BGデータ (Type A)|
|`$D1E5`|data|「詰みです」BGデータ (Type A)|
|`$D1F8`|code|右上キャラスプライト描画ルーチン|
|`$D227`|code|スプライトバッファへの書き込みルーチン|
|`$D250`|data|右上プレイヤー側キャラ スプライトデータ|
|`$D323`|data|右上COM側キャラ スプライトデータ|
|`$D3C1`|code|駒音を鳴らすルーチン|
|`$D3D8`|code||
|`$D496`|code|右上キャラスプライトを描画後、少し待つルーチン|
|`$D4A4`|code||
|`$D4D3`|data||
|`$D4F2`|data||
|`$D4F9`|data||
|`$D540`|data||
|`$D564`|data||
|`$D57C`|data||
|`$D594`|data||
|`$D5AC`|data|将棋盤の星、および持ち時間表示の ':' のスプライトデータ|
|`$D5C4`|data|デモプレイ入力 (0xFF 終端)|
|`$D5E0`|data|「あなたの勝ち」BGデータ (Type A)|
|`$D5F9`|data|「わたしの勝ち」BGデータ (Type A)|
|`$D612`|data|時間制限「アリ」BGデータ (Type A)|
|`$D618`|data|時間制限「ナシ」BGデータ (Type A)|
|`$D61E`|code|対局シーンへジャンプ|
|`$D621`|data|玉の近接利きデータ(相対インデックス形式)|
|`$D62A`|data|金の近接利きデータ(相対インデックス形式)|
|`$D631`|data|銀の近接利きデータ(相対インデックス形式)|
|`$D637`|data|桂の近接利きデータ(相対インデックス形式)|
|`$D63A`|data|歩の近接利きデータ(相対インデックス形式)|
|`$D63C`|data|龍の近接利きデータ(相対インデックス形式)|
|`$D641`|data|馬の近接利きデータ(相対インデックス形式)|
|`$D646`|data|駒種ごとの近接利きデータ(相対インデックス形式)へのポインタテーブル|
|`$D666`|data|駒種ごとの価値テーブルA|
|`$D676`|data|駒種ごとの価値テーブルB|
|`$D686`|data|駒種ごとの価値テーブルC|
|`$D696`|data|駒種ごとの価値テーブルD|
|`$D6A6`|data|近接駒の駒種ごとの利きデータ(相対座標形式)へのポインタテーブル|
|`$D6C6`|data|空の近接利きデータ(相対インデックス形式と相対座標形式を兼ねる)|
|`$D6D6`|data|玉の近接利きデータ(相対座標形式)|
|`$D6E6`|data|金の近接利きデータ(相対座標形式)|
|`$D6F6`|data|銀の近接利きデータ(相対座標形式)|
|`$D706`|data|桂の近接利きデータ(相対座標形式)|
|`$D716`|data|歩の近接利きデータ(相対座標形式)|
|`$D726`|data|平手初期盤面 1〜3段目|
|`$D747`|data|盤面 空白3段|
|`$D768`|data|平手初期盤面 7〜9段目|
|`$D789`|data|戦型ごとの定跡分岐へのポインタテーブル|
|`$D79D`|data|戦型ごとの定跡手順へのポインタテーブル|
|`$D7B1`|data|定跡分岐 中飛車|
|`$D7E4`|data|定跡分岐 四間飛車|
|`$D817`|data|定跡分岐 戦型ID=2 (空)|
|`$D818`|data|定跡分岐 角換わり|
|`$D828`|data|定跡分岐 筋違い角|
|`$D833`|data|定跡分岐 戦型ID=5 (空)|
|`$D834`|data|定跡分岐 プレイヤー飛車落ち|
|`$D849`|data|定跡分岐 プレイヤー二枚落ち|
|`$D84F`|data|定跡分岐 COM飛車落ち|
|`$D85F`|data|定跡分岐 COM二枚落ち|
|`$D874`|data|定跡手順 中飛車|
|`$D89B`|data|定跡手順 四間飛車|
|`$D8BE`|data|定跡手順 戦型ID=2 (空)|
|`$D8BF`|data|定跡手順 角換わり|
|`$D8E8`|data|定跡手順 筋違い角|
|`$D90D`|data|定跡手順 戦型ID=5 (空)|
|`$D90E`|data|定跡手順 プレイヤー飛車落ち|
|`$D931`|data|定跡手順 プレイヤー二枚落ち|
|`$D958`|data|定跡手順 COM飛車落ち|
|`$D979`|data|定跡手順 COM二枚落ち|
|`$D996`|code|対局シーン|
|`$D9D6`|code|対局シーン プレイヤーの手番|
|`$DA54`|code||
|`$DA7B`|code||
|`$DA9B`|code||
|`$DAE3`|code||
|`$DAFA`|code||
|`$DB0A`|code||
|`$DCE3`|code|対局シーン COMの手番|
|`$DDB9`|code|COMの序盤処理|
|`$DDF0`|code|COMの着手反映処理|
|`$DFDC`|code|待った処理|
|`$E382`|code|手合割に応じて局面と戦型関連データを初期化するルーチン|
|`$E488`|code|マスを座標 (x,y) に変換するルーチン|
|`$E497`|code|座標 (x,y) をマスに変換するルーチン|
|`$E49F`|code|ビジーウェイトルーチン|
|`$E4B2`|code|タイマーAの bit0 を得るルーチン (平手の戦型選択用)|
|`$E4B7`|code|プレイヤーの指し手の合法性判定ルーチン|
|`$E527`|code|近接駒の利きデータ(相対座標形式)をロードするルーチン|
|`$E540`|code|プレイヤーの香を動かす指し手の合法性判定ルーチン|
|`$E55A`|code|プレイヤーの龍を動かす指し手の合法性判定ルーチン|
|`$E55F`|code|プレイヤーの飛を動かす指し手の合法性判定ルーチン|
|`$E57D`|code|プレイヤーの馬を動かす指し手の合法性判定ルーチン|
|`$E582`|code|プレイヤーの角を動かす指し手の合法性判定ルーチン|
|`$E5A8`|code|プレイヤーの駒打ちの指し手の合法性判定ルーチン|
|`$E5FF`|code|プレイヤーの遠隔駒の移動の合法性判定ルーチン|
|`$E62E`|code|プレイヤーの指し手の移動距離が 2 以上かどうかを返すルーチン|
|`$E64D`|code|COMの指し手の合法性判定ルーチン|
|`$E6CB`|code|COMの香を動かす指し手の合法性判定ルーチン|
|`$E6E0`|code|COMの龍を動かす指し手の合法性判定ルーチン|
|`$E6E5`|code|COMの飛を動かす指し手の合法性判定ルーチン|
|`$E703`|code|COMの馬を動かす指し手の合法性判定ルーチン|
|`$E708`|code|COMの角を動かす指し手の合法性判定ルーチン|
|`$E72E`|code|COMの駒打ちの指し手の合法性判定ルーチン|
|`$E784`|code|COMの遠隔駒の移動の合法性判定ルーチン|
|`$E7B3`|code|COMの指し手の移動距離が 2 以上かどうかを返すルーチン|
|`$E7D2`|code|定跡関連データ初期化ルーチン|
|`$E7F8`|code|定跡処理|
|`$E8E8`|code|定跡手を採用するかどうかの判定|
|`$E90E`|code|定跡手を採用するかどうかの判定: 駒損判定|
|`$E98A`|code|局面Aを局面Bへコピーするルーチン|
|`$E9B2`|code|局面Bを局面Aへコピーするルーチン|
|`$E9DA`|code|利き情報初期化ルーチン|
|`$E9F2`|code|プレイヤー側の利き情報更新ルーチン|
|`$EA20`|code|プレイヤー側の利き情報更新: 近接駒の処理|
|`$EA57`|code|プレイヤー側の利き情報更新: 指定マスへの利き追加および attacker 更新|
|`$EA80`|code|プレイヤー側の利き情報更新: 香の処理|
|`$EA8A`|code|プレイヤー側の利き情報更新: 単一方向の遠隔利きの処理|
|`$EB26`|code|プレイヤー側の利き情報更新: 飛/角の処理|
|`$EB3D`|data|飛/角の遠隔利きデータ|
|`$EB45`|code|プレイヤー側の利き情報更新: 飛の処理|
|`$EB4D`|code|プレイヤー側の利き情報更新: 角の処理|
|`$EB55`|code|プレイヤー側の利き情報更新: 龍の処理|
|`$EB5D`|code|プレイヤー側の利き情報更新: 馬の処理|
|`$EB65`|data|プレイヤー側の利き情報更新: 駒種ごとの処理ルーチンテーブル|
|`$EB85`|code|COM側の利き情報更新ルーチン|
|`$EBB6`|code|COM側の利き情報更新: 近接駒の処理|
|`$EBF2`|code|COM側の利き情報更新: 指定マスへの利き追加および attacker 更新|
|`$EC1B`|code|COM側の利き情報更新: 香の処理|
|`$EC25`|code|COM側の利き情報更新: 単一方向の遠隔利きの処理|
|`$ECC1`|code|COM側の利き情報更新: 飛/角の処理|
|`$ECD8`|code|COM側の利き情報更新: 飛の処理|
|`$ECE0`|code|COM側の利き情報更新: 角の処理|
|`$ECE8`|code|COM側の利き情報更新: 龍の処理|
|`$ECF0`|code|COM側の利き情報更新: 馬の処理|
|`$ECF8`|code|COM側の利き情報更新: 駒種ごとの処理ルーチンテーブル|
|`$ED18`|code|局面評価ルーチン|
|`$EEE2`|code|局面評価: 駒得マスの処理|
|`$EF11`|code|局面評価: 駒損マスの処理|
|`$EF4A`|code|2つのマスの間の距離を求めるルーチン|
|`$EF70`|code|探索による思考ルーチン (定跡を使わない)|
|`$F06D`|code|探索による思考: 盤上の駒を動かす指し手の生成|
|`$F08B`|code|探索による思考: 盤上の駒を動かす指し手の生成: 近接移動|
|`$F0D5`|code|探索による思考: 盤上の駒を動かす指し手の評価|
|`$F0FE`|code|探索による思考: 盤上の駒を動かす指し手を適用|
|`$F150`|code|探索による思考: 盤上の駒を動かす指し手の生成: 飛/角|
|`$F167`|data|飛/角の遠隔利きデータ|
|`$F16F`|code|探索による思考: 盤上の駒を動かす指し手の生成: 飛|
|`$F177`|code|探索による思考: 盤上の駒を動かす指し手の生成: 角|
|`$F17F`|code|探索による思考: 盤上の駒を動かす指し手の生成: 香|
|`$F189`|code|探索による思考: 盤上の駒を動かす指し手の生成: 龍|
|`$F191`|code|探索による思考: 盤上の駒を動かす指し手の生成: 馬|
|`$F199`|code|探索による思考: 盤上の駒を動かす指し手の生成: 単一方向への遠隔移動|
|`$F1C7`|code|探索による思考: 駒打ちの指し手の生成|
|`$F205`|data|COM側の駒種ごとの打てる範囲の制限|
|`$F20C`|code|COM側の歩のある筋を求めるルーチン|
|`$F23B`|code|探索による思考: 駒打ちの指し手の適用/評価|
|`$F262`|code|探索による思考: 駒種ごとの盤上の駒を動かす指し手生成ルーチンテーブル|
|`$F2AC`|code|候補手の評価修正および最善手との比較を行うルーチン|
|`$F6F9`|code|最善手更新ルーチン|
|`$F854`|code|プレイヤー玉の詰み判定ルーチン (候補手を適用した局面が対象)|
|`$F8AE`|data|距離 1 以内への相対インデックスたち|
|`$F8B7`|code|プレイヤー玉の詰み判定: 玉以外の盤上の駒を動かす指し手を生成|
|`$F937`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成|
|`$F952`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 近接移動|
|`$F98E`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を適用/判定|
|`$F9AD`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を適用|
|`$F9C5`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 飛/角|
|`$F9E1`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 飛|
|`$F9E7`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 角|
|`$F9ED`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 香|
|`$F9F8`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 龍|
|`$FA03`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 馬|
|`$FA0E`|code|プレイヤー玉の詰み判定: ある盤上の駒を動かす指し手を生成: 単一方向への遠隔移動|
|`$FA3A`|code|プレイヤー玉の詰み判定: あるマスに駒を打つ手を生成|
|`$FA6E`|data|プレイヤー側の駒種ごとの打てる範囲の制限|
|`$FA75`|code|プレイヤー玉とその両隣の筋に歩があるかどうか調べるルーチン|
|`$FAB5`|code|プレイヤー玉の詰み判定: あるマスに駒を打つ手を適用/判定|
|`$FAD8`|code|ルート局面に対して現在の候補手を適用するルーチン|
|`$FB03`|code|プレイヤー玉の詰み判定: 指し手を適用した結果詰みを逃れているか判定|
|`$FB1A`|data|プレイヤー玉の詰み判定: 駒種ごとの盤上の駒を動かす指し手生成ルーチンテーブル|
|`$FB3A`|code|フレームごとのサウンド処理ルーチン (NMI から呼ばれる)|
|`$FB4D`|code|APU `$4015` 更新ルーチン|
|`$FB59`|code|矩形波1 発声ルーチン|
|`$FB6A`|code|三角波 発声ルーチン|
|`$FB80`|code|フレームごとの矩形波1処理ルーチン|
|`$FB8B`|code|矩形波1 サウンドデータ処理ルーチン|
|`$FBE8`|code|矩形波1 サウンドデータアドレス設定ルーチン|
|`$FBF1`|code|(未使用コード)|
|`$FC00`|code|矩形波1 消音ルーチン|
|`$FC22`|code|矩形波1 音色設定ルーチン|
|`$FC2F`|code|指定した音階に対応する矩形波/三角波周波数タイマー値を返すルーチン|
|`$FC46`|code|フレームごとの三角波処理ルーチン|
|`$FC51`|code|三角波 サウンドデータ処理ルーチン|
|`$FCA7`|code|三角波 サウンドデータアドレス設定ルーチン|
|`$FCB0`|code|(未使用コード)|
|`$FCBF`|code|三角波 消音ルーチン|
|`$FCCB`|data|矩形波1 音色設定ルーチンテーブル|
|`$FCE9`|code|矩形波1 音色設定: 音色0|
|`$FCEE`|code|矩形波1 音色設定: 音色1|
|`$FCF3`|code|矩形波1 音色設定: 音色2|
|`$FCF8`|code|矩形波1 音色設定: 音色3|
|`$FCFD`|code|矩形波1 音色設定: 音色4|
|`$FD02`|code|矩形波1 音色設定: 音色5|
|`$FD07`|data|各音階に対応する周波数タイマー値|
|`$FD21`|code|矩形波1 有効化ルーチン|
|`$FD28`|code|三角波 有効化ルーチン|
|`$FD2F`|code|サウンド 0 再生要求ルーチン|
|`$FD33`|code|サウンド再生要求: 矩形波1|
|`$FD41`|data|サウンド 0 データ 矩形波1|
|`$FD48`|code|サウンド 1 再生要求ルーチン|
|`$FD4F`|data|サウンド 1 データ 矩形波1|
|`$FD59`|code|サウンド 2 再生要求ルーチン|
|`$FD60`|data|サウンド 2 データ 矩形波1|
|`$FD66`|code|サウンド 3 再生要求ルーチン|
|`$FD6D`|data|サウンド 3 データ 矩形波1|
|`$FD73`|code|サウンド 4 再生要求ルーチン|
|`$FD81`|code|サウンド再生要求: 三角波|
|`$FD8C`|data|サウンド 4 データ 矩形波1|
|`$FD9A`|data|サウンド 4 データ 三角波|
|`$FDA6`|code|サウンド 5 再生要求ルーチン|
|`$FDB4`|data|サウンド 5 データ 三角波|
|`$FDBF`|code|サウンド 6 再生要求ルーチン|
|`$FDC6`|data|サウンド 6 データ 矩形波1|
|`$FDD2`|code|サウンド 7 再生要求ルーチン|
|`$FDD9`|data|サウンド 7 データ 矩形波1|
|`$FDE6`|code|サウンド 8 再生要求ルーチン|
|`$FDED`|data|サウンド 8 データ 矩形波1|
|`$FDF4`|code|サウンド 9 再生要求ルーチン|
|`$FDFB`|data|サウンド 9 データ 矩形波1|
|`$FE01`|code|サウンド 10 再生要求ルーチン|
|`$FE0F`|data|サウンド 10 データ 矩形波1|
|`$FE74`|data|サウンド 10 データ 三角波|
|`$FE8A`|code|サウンド 11 再生要求ルーチン|
|`$FE98`|data|サウンド 11 データ 矩形波1|
|`$FEBF`|code|サウンド 12 再生要求ルーチン|
|`$FEC6`|data|サウンド 12 データ 矩形波1|
|`$FEE9-$FFDF`||(未使用)|
|`$FFE0`|code|入力更新ルーチン: 拡張ポート対応|
|`$FFEF-$FFF9`||(未使用)|
|`$FFFA`|data|割り込みベクタ|
